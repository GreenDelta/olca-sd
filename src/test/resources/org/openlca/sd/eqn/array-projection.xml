<?xml version="1.0" encoding="utf-8"?>
<xmile version="1.0" xmlns="http://docs.oasis-open.org/xmile/ns/XMILE/v1.0">
	<header>
		<name>Array projection test</name>
	</header>
	<sim_specs method="Euler" time_units="Years">
		<start>1</start>
		<stop>10</stop>
		<dt>1</dt>
	</sim_specs>
	<dimensions>
		<dim name="Product">
			<elem name="A"/>
			<elem name="B"/>
		</dim>
		<dim name="Region">
			<elem name="North"/>
			<elem name="South"/>
		</dim>
	</dimensions>
	<model>
		<variables>
			<!-- Stock has 1 dimension: Product [2] -->
			<stock name="Stock">
				<dimensions>
					<dim name="Product"/>
				</dimensions>
				<element subscript="A">
					<eqn>10</eqn>
				</element>
				<element subscript="B">
					<eqn>20</eqn>
				</element>
				<inflow>inflow</inflow>
				<outflow>outflow</outflow>
				<non_negative/>
			</stock>
			<!-- Inflow has 1 dimension: Product [2] - same as stock -->
			<flow name="inflow">
				<dimensions>
					<dim name="Product"/>
				</dimensions>
				<element subscript="A">
					<eqn>1</eqn>
				</element>
				<element subscript="B">
					<eqn>2</eqn>
				</element>
			</flow>
			<!-- Outflow has 2 dimensions: Product x Region [2, 2] -->
			<!-- This requires projection: sum over Region dimension -->
			<!-- Expected: outflow[A] = 1+2 = 3, outflow[B] = 3+4 = 7 -->
			<flow name="outflow">
				<dimensions>
					<dim name="Product"/>
					<dim name="Region"/>
				</dimensions>
				<element subscript="A, North">
					<eqn>1</eqn>
				</element>
				<element subscript="A, South">
					<eqn>2</eqn>
				</element>
				<element subscript="B, North">
					<eqn>3</eqn>
				</element>
				<element subscript="B, South">
					<eqn>4</eqn>
				</element>
			</flow>
		</variables>
	</model>
</xmile>
